{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body p-3 p-md-5">
                <h4 class="card-title mb-4 fw-bold">Edit Transaction</h4>
                <form method="POST">
                    <div class="row g-3 mb-3">
                        <div class="col-md-4">
                            <label class="form-label text-muted small text-uppercase fw-bold">Date</label>
                            <input type="date" name="date" class="form-control" value="{{ entry['Date'] }}">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label text-muted small text-uppercase fw-bold">Category</label>
                            <select name="category" class="form-select">
                                {% for cat in ['Food', 'Transport', 'Shopping', 'Bills', 'Salary', 'Transfer', 'Entertainment', 'Other'] %}
                                <option value="{{ cat }}" {% if entry.get('Category') == cat %}selected{% endif %}>{{ cat }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label text-muted small text-uppercase fw-bold">Description</label>
                            <input type="text" name="description" class="form-control" required value="{{ entry['Transaction'] }}">
                        </div>
                    </div>
                    
                    <div class="p-3 bg-light rounded-3 mb-3">
                        <h6 class="text-primary fw-bold mb-3"><i class="bi bi-person me-2"></i>EJ Personal Account</h6>
                        <div class="row g-3">
                            <div class="col-12 col-sm-6">
                                <label class="form-label small text-muted">Incoming (+)</label>
                                <div class="input-group">
                                    <span class="input-group-text">₱</span>
                                    <input type="number" step="0.01" name="inc_ej" class="form-control" value="{{ entry['Incoming EJ'] }}">
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <label class="form-label small text-muted">Outgoing (-)</label>
                                <div class="input-group">
                                    <span class="input-group-text">₱</span>
                                    <input type="number" step="0.01" name="out_ej" class="form-control" value="{{ entry['Outgoing EJ'] }}">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="p-3 bg-light rounded-3 mb-4">
                        <h6 class="text-success fw-bold mb-3"><i class="bi bi-piggy-bank me-2"></i>EJ & Neng Account</h6>
                        <div class="row g-3">
                            <div class="col-12 col-sm-6">
                                <label class="form-label small text-muted">Incoming (+)</label>
                                <div class="input-group">
                                    <span class="input-group-text">₱</span>
                                    <input type="number" step="0.01" name="inc_shared" class="form-control" value="{{ entry['Incoming (EJ & Neng)'] }}">
                                </div>
                            </div>
                            <div class="col-12 col-sm-6">
                                <label class="form-label small text-muted">Outgoing (-)</label>
                                <div class="input-group">
                                    <span class="input-group-text">₱</span>
                                    <input type="number" step="0.01" name="out_shared" class="form-control" value="{{ entry['Outgoing (EJ & Neng)'] }}">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary w-100 py-2">Update Transaction</button>
                    <a href="/ledger" class="btn btn-link w-100 mt-2 text-decoration-none text-muted">Cancel</a>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}